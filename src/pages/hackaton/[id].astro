---
import type { GetStaticPaths } from 'astro';
import Hackatones from '../../mooks/hackatones_prueba.json';
import LayoutHackatones from '../../layouts/LayoutHackatones.astro';
import ModalParticipar from '../../components/react/ModalParticipar';

// Definir las rutas estáticas
export const getStaticPaths: GetStaticPaths = async () => {
    return Hackatones.map((hackaton) => ({
        params: { id: hackaton.id.toString() },
    }));
};

// Obtener el ID desde la URL
const { id } = Astro.params;
const hackaton = Hackatones.find((h) => h.id === Number(id));

// Si no se encuentra, puedes devolver contenido vacío o lanzar error
if (!hackaton) {
    throw new Error(`Hackatón con id ${id} no encontrado`);
}

const { nombre, descripcion, fecha, lenguajes, imagen } = hackaton;
---

<LayoutHackatones title={`Hackatón: ${nombre}`}>
    <section class="flex flex-col items-center justify-center gap-6 text-white max-w-[1120px] mx-auto z-50 h-full">
        <div class="flex items-center justify-center gap-4 w-full">
            <div class="flex-1">
                <img src={imagen} alt={`Hackatón ${nombre}`} class="w-full max-w-md object-contain rounded-xl" />
            </div>
            <div class="flex-2 flex flex-col gap-6">
                <h1
                    class="text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-300 via-pink-400 to-secondary"
                >
                    {nombre}
                </h1>
                <p class="text-2xl">📅 Fecha: {fecha}</p>
                <p class="text-2xl">🧠 Lenguajes: {lenguajes.join(', ')}</p>

                <ModalParticipar client:only="react" />
            </div>
        </div>
    </section>
</LayoutHackatones>
